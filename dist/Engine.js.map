{"version":3,"file":"Engine.js","sourceRoot":"","sources":["../src/Engine.ts"],"names":[],"mappings":"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"}